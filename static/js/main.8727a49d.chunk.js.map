{"version":3,"sources":["Component/Searchbar/Searchbar.module.css","Component/ImageGalleryItem/ImageGalleryItem.module.css","Component/Modal/Modal.module.css","Component/App/App.module.css","Component/ImageGallery/ImageGallery.module.css","Component/Button/Button.module.css","Component/Searchbar/Searchbar.js","Component/ImageGalleryItem/ImageGalleryItem.js","Component/ImageGallery/ImageGallery.js","services/images-api.js","Component/Button/Button.js","Component/Loader/Loader.js","Component/Modal/Modal.js","Component/App/App.js","index.js"],"names":["module","exports","Searchbar","state","search","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","name","onChange","Component","ImageGalleryItem","image","openModal","webformatURL","tags","id","onClick","src","alt","ImageGalleryItemImage","ImageGallery","images","map","fetchImages","query","pageNumber","fetch","then","x","Promise","resolve","setTimeout","res","json","data","hits","Button","Loader","MODAL_ROOT","document","querySelector","Modal","backdropRef","createRef","handleKeyPress","console","log","code","onClose","handleBackdropClick","current","window","addEventListener","removeEventListener","children","createPortal","Overlay","ref","role","App","error","isLoading","isModalOpen","largeImageId","largeImage","onSearch","fetchImagesWithScroll","scroll","imagesApi","catch","finally","firstLoadedImage","scrollTo","top","documentElement","scrollHeight","behavior","findPic","find","Number","currentTarget","closeModal","prevProps","prevState","length","Warning","largeImageURL","defaultProps","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.8727a49d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__1BytU\",\"SearchForm\":\"Searchbar_SearchForm__1gQBf\",\"SearchFormButton\":\"Searchbar_SearchFormButton__10jIa\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__1AjNN\",\"SearchFormInput\":\"Searchbar_SearchFormInput__199rv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3xDT4\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3Y7RU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3Mp3O\",\"Modal\":\"Modal_Modal__2gzVT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Warning\":\"App_Warning__M12Im\",\"App\":\"App_App__2yW8J\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2TT0t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__NMt2u\"};","//Описание компонента Searchbar\r\n//Компонент принимает один проп onSubmit - функцию для передачи значения инпута при сабмите формы. Создает DOM-элемент следующей структуры.\r\nimport React, { Component } from 'react';\r\nimport styles from './Searchbar.module.css';\r\n\r\nexport default class Searchbar extends Component {\r\n  state = { search: '' };\r\n\r\n  handleChange = e => {\r\n    this.setState({ search: e.target.value });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.search);\r\n    this.setState({ search: '' });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.search}\r\n            name=\"search\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport T from 'prop-types';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image, openModal }) => {\r\n  const { webformatURL, tags } = image;\r\n\r\n  return (\r\n    <li id={image.id} onClick={openModal} className={styles.ImageGalleryItem}>\r\n      <img\r\n        src={webformatURL}\r\n        alt={tags}\r\n        className={styles.ImageGalleryItemImage}\r\n      />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  image: T.shape({\r\n    webformatURL: T.string,\r\n  }),\r\n};\r\n\r\nexport default ImageGalleryItem;","import React from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport styles from './ImageGallery.module.css';\r\n\r\nconst ImageGallery = ({ images, openModal }) => {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {images.map(image => (\r\n        <ImageGalleryItem openModal={openModal} key={image.id} image={image} />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ImageGallery;","export const fetchImages = (query = \"\", pageNumber = 1) => {\r\n  return fetch(\r\n    `https://pixabay.com/api/?q=${query}&page=${pageNumber}&key=22516391-185885990a61958acb3a57b33&image_type=photo&orientation=horizontal&per_page=12`\r\n  )\r\n    .then((x) => new Promise((resolve) => setTimeout(() => resolve(x), 1000))) // Задержка добавлена для тестирования Loader\r\n    .then((res) => res.json())\r\n    .then((data) => data.hits);\r\n};\r\n\r\nexport { fetchImages as default };\r\n","import React from 'react';\r\nimport styles from './Button.module.css';\r\n\r\nconst Button = ({ fetchImages }) => (\r\n  <button type=\"button\" className={styles.Button} onClick={fetchImages}>\r\n    Load more...\r\n  </button>\r\n);\r\n\r\nexport default Button;","import React from 'react';\r\n\r\nconst Loader = () => <div>Loading...</div>;\r\n\r\nexport default Loader;","import React, { Component, createRef } from \"react\";\r\nimport { createPortal } from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport styles from \"./Modal.module.css\";\r\n\r\nconst MODAL_ROOT = document.querySelector(\"#modal-root\");\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n  };\r\n\r\n  backdropRef = createRef();\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.handleKeyPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.handleKeyPress);\r\n  }\r\n\r\n  handleKeyPress = (e) => {\r\n    console.log(e);\r\n\r\n    if (e.code !== \"Escape\") {\r\n      return;\r\n    }\r\n\r\n    this.props.onClose();\r\n  };\r\n\r\n  handleBackdropClick = (e) => {\r\n    if (this.backdropRef.current && e.target !== this.backdropRef.current) {\r\n      return;\r\n    }\r\n\r\n    this.props.onClose();\r\n  };\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    return createPortal(\r\n      <div\r\n        className={styles.Overlay}\r\n        ref={this.backdropRef}\r\n        onClick={this.props.onClose}\r\n        role=\"presentation\"\r\n      >\r\n        <div className={styles.Modal}>{children}</div>\r\n      </div>,\r\n      MODAL_ROOT\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Searchbar from \"../Searchbar/Searchbar\";\r\nimport ImageGallery from \"../ImageGallery/ImageGallery\";\r\nimport * as imagesApi from \"../../services/images-api\";\r\nimport Button from \"../Button/Button\";\r\nimport Loader from \"../Loader/Loader\";\r\nimport Modal from \"../Modal/Modal\";\r\nimport styles from \"../App/App.module.css\";\r\n\r\nexport default class App extends Component {\r\n  static defaultProps = {};\r\n\r\n  static propTypes = {};\r\n\r\n  state = {\r\n    images: [],\r\n    pageNumber: 1,\r\n    search: \"\",\r\n    error: \"\",\r\n    isLoading: false,\r\n    isModalOpen: false,\r\n    largeImageId: null,\r\n    largeImage: [],\r\n  };\r\n\r\n  componentDidMount() {}\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.search !== this.state.search) {\r\n      this.fetchImages(false);\r\n    }\r\n  }\r\n\r\n  onSearch = (search) => {\r\n    this.setState({ search, images: [], pageNumber: 1 });\r\n  };\r\n\r\n  fetchImagesWithScroll = () => {\r\n    this.fetchImages(true);\r\n  };\r\n\r\n  fetchImages = (scroll) => {\r\n    this.setState({ isLoading: true });\r\n    const { search, pageNumber } = this.state;\r\n    imagesApi\r\n      .fetchImages(search, pageNumber)\r\n      .then((images) => {\r\n        this.setState((state) => ({\r\n          images: [...state.images, ...images],\r\n          pageNumber: state.pageNumber + 1,\r\n        }));\r\n        return images[0];\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ error });\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      })\r\n      .then((firstLoadedImage) => {\r\n        if (scroll) {\r\n          const { id } = firstLoadedImage;\r\n          window.scrollTo({\r\n            top: document.documentElement.scrollHeight,\r\n            behavior: \"smooth\",\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  findPic = () => {\r\n    const largeImg = this.state.images.find((image) => {\r\n      return image.id === this.state.largeImageId;\r\n    });\r\n    return largeImg;\r\n  };\r\n\r\n  openModal = (e) => {\r\n    this.setState({\r\n      isModalOpen: true,\r\n      largeImageId: Number(e.currentTarget.id),\r\n    });\r\n  };\r\n  closeModal = () => this.setState({ isModalOpen: false });\r\n\r\n  render() {\r\n    const { isLoading, images, isModalOpen, largeImageId } = this.state;\r\n\r\n    return (\r\n      <div className={styles.App}>\r\n        <Searchbar onSubmit={this.onSearch} />\r\n        <ImageGallery openModal={this.openModal} images={images} />\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 ? (\r\n          <Button fetchImages={this.fetchImagesWithScroll} />\r\n        ) : (\r\n          <div className={styles.Warning}>\r\n            You have to write down right word for search\r\n          </div>\r\n        )}\r\n        {isModalOpen && (\r\n          <Modal largeImageId={largeImageId} onClose={this.closeModal}>\r\n            <img src={this.findPic().largeImageURL} alt={this.findPic().tags} />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./Component/App/App\";\nimport \"./styles.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}